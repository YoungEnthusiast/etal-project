{% extends "discover/base.html" %}
{% load discover_tags %}
{% load crispy_forms_tags %}
{% block title %}Posts{% endblock %}


{% block content %}

<!-- Add 1st Form -->
            <div class="modal fade" id="add1" role="dialog">
              <div class="modal-dialog">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h4 class="modal-title text-dark-green" id="inquiryModalLabel"><i class="fas fa-plus-circle"></i> Add Anticipatory Order</h4>
                          <button type="button" class="close" data-dismiss="modal">
                              <span>&times;</span>
                          </button>
                      </div>
                      <div class="modal-body">
                        <br>
                        <form method="post" class="form-group col-lg-12 text-dark-green" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="form-row">
                            <div class="form-group col-sm-12 mb-2">
                                {{ form.body|as_crispy_field }}
                            </div>
                        </div>

                        <input type="submit" class="form-group col-md-12 btn btn-info" value="Post">
                      </form>
                      </div>
                  </div>
              </div>
            </div>
            <button class="btn btn-dark-green col-md-12" data-toggle="modal" data-target="#add1"><strong><i class="fa fa-plus-circle fa-1x mr-1 text-white"></i>Share your though</strong></button>




    {% if tag %}
        <h4>Posts tagged with "{{ tag.name }}"</h4>
        <br>
    {% endif %}
    {% for post in posts %}
        <h5 class="text-info"><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h5>
        <p class="tags">
            Tags:
            {% for tag in post.tags.all %}
                <a href="{% url "discover:post_list_by_tag" tag.slug %}">{{ tag.name }}</a>
                {% if not forloop.last %}, {% endif %}
            {% endfor %}
        </p>
        <p class="date">posted {{ post.publish|timesince }} ago by {{ post.author }}</p>
        <div class="inline-container">
          {{ post.body|markdown|truncatewords_html:30 }}...
        </div>
    {% endfor %}

    {% include "discover/pagination.html" with page=posts %}
{% endblock %}
